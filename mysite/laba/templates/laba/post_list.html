{% extends 'laba/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h2>

{% for post in page_obj %}
<div class="post">
    <p>
        <a href="{% url 'post_detail' post.id %}">
            {{ post.text }}
        </a>
    </p>

    <small>
        {{ post.author.username }} ¬∑ {{ post.created_at }}
    </small>

    <div class="post-meta">
        üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {{ post.comments.count }}
    </div>

    {% if request.user == post.author %}
    <div class="post-actions">
        <a href="{% url 'post_edit' post.id %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
    </div>
    {% endif %}

    <div class="post-actions">
        <form method="post" action="{% url 'post_like' post.id %}">
            {% csrf_token %}
            <button type="submit">‚ù§Ô∏è</button>
        </form>

        <span>–õ–∞–π–∫–æ–≤: {{ post.likes.count }}</span>
    </div>

</div>


{% endfor %}


<div class="pagination">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}">–ù–∞–∑–∞–¥</a>
    {% endif %}

    <span>
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä—ë–¥</a>
    {% endif %}
</div>

{% endblock %}
